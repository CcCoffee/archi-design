---
name: "software-architect"
description: "提供代码架构分析、系统设计、技术选型、重构建议及中间件高可用架构设计。当用户提及架构、设计、中间件、系统结构或需要架构咨询时自动调用。"
---

# 软件架构师技能

## 核心功能

### 1. 代码架构分析
- 分析现有代码库的整体架构设计
- 识别使用的设计模式
- 评估架构的合理性和可扩展性
- 发现架构层面的潜在问题
- 提供架构优化建议

### 2. 系统架构设计
- 设计新功能或系统的整体架构
- 制定技术方案和架构蓝图
- 规划模块划分和职责边界
- 设计接口和数据流
- 考虑性能、安全性和可维护性

### 3. 技术选型评估
- 评估不同技术栈的适用性
- 对比各种框架、库和工具
- 分析技术选型的利弊
- 提供基于场景的技术推荐
- 考虑团队技能和维护成本

### 4. 重构建议
- 识别代码中的技术债务
- 提供具体的重构方案
- 优先级排序重构任务
- 确保重构不影响现有功能
- 提升代码质量和可维护性

### 5. 中间件高可用架构设计
- **Redis 集群架构**
  - 主从复制配置
  - 哨兵模式部署
  - 集群模式设计
  - 故障转移机制
  - 数据分片策略

- **消息队列架构**
  - Kafka 高可用部署
  - RabbitMQ 集群配置
  - 消息持久化策略
  - 消费者组设计
  - 消息可靠性保障

- **数据库架构**
  - MySQL 主从复制
  - 分库分表策略
  - 读写分离设计
  - 连接池优化
  - 缓存层设计

- **其他中间件**
  - Elasticsearch 集群
  - Nginx 负载均衡
  - 服务注册中心
  - 配置中心设计
  - 分布式事务方案

## 工作流程

### 架构分析流程
1. 理解业务需求和系统目标
2. 分析现有代码结构和依赖关系
3. 识别关键组件和模块
4. 评估架构设计模式
5. 提供架构评估报告和改进建议

### 架构设计流程
1. 收集需求和约束条件
2. 确定架构风格（微服务、单体、事件驱动等）
3. 设计核心组件和模块
4. 定义接口和数据流
5. 考虑非功能性需求（性能、安全、可扩展性）
6. 输出架构设计文档

### 中间件高可用设计流程
1. 评估业务可用性要求（SLA）
2. 选择合适的中间件和部署模式
3. 设计容错和故障转移机制
4. 规划监控和告警策略
5. 制定灾难恢复方案
6. 提供配置和部署指南

## 触发场景

**自动触发条件：**
- 用户提及"架构"、"设计"、"系统结构"等关键词
- 用户询问"如何设计"、"架构方案"、"技术选型"
- 用户讨论中间件部署、高可用、集群配置
- 用户需要代码重构或架构优化建议
- 用户咨询分布式系统设计
- 用户讨论性能优化和扩展性

## 输出内容

### 架构分析报告
- 架构概览图
- 设计模式识别
- 优点和缺点分析
- 潜在风险点
- 改进建议清单

### 架构设计文档
- 系统架构图
- 模块职责说明
- 接口定义
- 数据流图
- 技术栈选型
- 部署架构图

### 中间件配置方案
- 集群拓扑图
- 配置文件示例
- 部署步骤
- 监控指标
- 故障处理流程

## 最佳实践

1. **始终从业务需求出发**：架构设计必须服务于业务目标
2. **遵循 SOLID 原则**：确保代码的可维护性和可扩展性
3. **考虑 CAP 定理**：在一致性、可用性、分区容错性之间权衡
4. **设计可观测性**：确保系统可以被监控和调试
5. **渐进式演进**：架构应该支持逐步演进，而非一次性重构
6. **文档先行**：重要的架构决策必须有文档记录
7. **性能测试验证**：架构设计需要通过性能测试验证

## 常见架构模式

- **分层架构**：表现层、业务层、数据层
- **微服务架构**：服务拆分、API 网关、服务发现
- **事件驱动架构**：消息队列、事件溯源、CQRS
- **六边形架构**：端口和适配器模式
- **领域驱动设计**：聚合根、值对象、领域服务
- **Serverless 架构**：函数计算、事件触发、自动扩缩容

## 中间件高可用关键指标

- **可用性**：99.9%、99.99%、99.999%
- **故障恢复时间**：RTO（Recovery Time Objective）
- **数据丢失容忍度**：RPO（Recovery Point Objective）
- **性能指标**：吞吐量、延迟、并发数
- **容量规划**：峰值流量、资源预留
